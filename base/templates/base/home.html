{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Home Mindbridge</title>
    <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"
          integrity="sha512-..." crossorigin="anonymous" referrerpolicy="no-referrer"/>
    <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;600&display=swap" rel="stylesheet">
</head>
<style>

        body {
            margin: 0;
            font-family: 'Inter', sans-serif;
            background: #f9f9fb;
            color: #333;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .dropdown {
            position: relative;
        }

        .dropbtn {
            background: none;
            border: none;
            color: #BFBFBF;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            padding: 0;
        }

        .dropbtn:hover,
        .dropbtn:focus {
            color: #0B304A;
        }

        .dropdown-content {
            display: none;
            position: absolute;
            background-color: white;
            min-width: 160px;
            box-shadow: 0px 8px 16px rgba(0, 0, 0, 0.2);
            z-index: 1000;
            border-radius: 6px;
            margin-top: 10px;
        }

        .dropdown-content a {
            color: black;
            padding: 10px 16px;
            text-decoration: none;
            display: block;
        }

        .dropdown-content a:hover {
            background-color: #f1f1f1;
        }

        .show {
            display: block;
        }

        .navbar {
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 1rem var(--padding-x);
            background: #ffffff;
            box-shadow: 0 0.375rem 0.75rem rgba(132, 140, 156, 0.2);
            position: sticky;
            top: 0;
            z-index: 999;
            background-color: white;
            padding: 10px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.1);
        }

        .navbar-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            width: 100%;
            max-width: var(--max-width);
            gap: clamp(1rem, 5vw, 3.5rem);
        }

        .logo {
            font-size: clamp(1.5rem, 2vw, 2rem);
            font-weight: 800;
            font-family: 'Sofia Sans', sans-serif;
            background: linear-gradient(90deg, #FF9EB2, #FAA5FB, #F495FF, #E2D5FF, #8F93FF);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .menu {
            display: flex;
            gap: clamp(1rem, 3vw, 2.5rem);
            list-style: none;
        }

        .menu li a {
            text-decoration: none;
            font-size: 1rem;
            font-weight: 600;
            color: #BFBFBF;
            transition: color 0.3s ease;
        }

        .menu li a.active,
        .menu li a:hover {
            color: #0B304A;
        }

        .search {
            display: flex;
            align-items: center;
            border: 2px solid #768694;
            border-radius: 0.25rem;
            padding: 0.5rem 1rem;
            flex-grow: 1;
            max-width: 20rem;
            gap: 0.5rem;
        }

        .search input {
            border: none;
            outline: none;
            font-size: 1rem;
            flex: 1;
            background: transparent;
            color: #768694;
        }

        .search i {
            color: #768694;
        }

        .icons {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-left: 5%;
        }

        .icons i {
            font-size: 1.25rem;
            color: #0B304A;
            cursor: pointer;
        }

        .avatar-dropdown {
            position: relative;
        }

        .avatar {
            width: 2.5rem;
            height: 2.5rem;
            border-radius: 50%;
            overflow: hidden;
            border: 2px solid #BFBFBF;
        }

        .avatar img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .dropdown-menu {
            position: absolute;
            top: 50px;
            right: 0;
            width: 200px;
            background: white;
            border-radius: 12px;
            box-shadow: 0 6px 12px rgba(132, 140, 156, 0.2);
            display: none;
            flex-direction: column;
            padding: 16px 0;
            z-index: 1000;
        }

        .dropdown-menu a {
            padding: 12px 20px;
            display: flex;
            align-items: center;
            gap: 12px;
            text-decoration: none;
            color: #0B304A;
            font-weight: 600;
            font-size: 16px;
            transition: background 0.2s ease;
        }

        .dropdown-menu a:hover {
            background: #F5F6F9;
            border-radius: 8px;
        }

        .show {
            display: flex;
        }


        .main-layout {
            display: flex;
            gap: 20px;
            margin-top: 20px;
        }

        .filters {
            width: 250px;
            background: white;
            padding: 20px;
            border-radius: 10px;
            font-size: 14px;
            border: 1px solid #ddd;
        }

        .filters h4 {
            margin-top: 20px;
            margin-bottom: 10px;
        }

        .filters label {
            display: block;
            margin-bottom: 8px;
        }

        .jobs {
            flex: 1;
        }

        .job-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            border: 1px solid #ddd;
        }

        .job-card h3 {
            margin-top: 0;
        }

        .salary {
            font-weight: bold;
            margin: 5px 0;
        }

        .tags {
            color: #888;
            font-size: 14px;
        }

        .company {
            font-size: 14px;
            color: #444;
        }

        .apply-btn {
            background: #f052e3;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 6px;
            cursor: pointer;
            margin-top: 10px;
        }

        .pagination {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }

        .page {
            border: none;
            background: #eee;
            padding: 8px 12px;
            border-radius: 6px;
            cursor: pointer;
        }

        .page.active {
            background: #f052e3;
            color: white;
        }

        .footer {
            background-color: #0B304A;
            padding: 48px 80px 40px;
            margin-top: 50px;
            color: #FFFFFF;
            font-family: 'General Sans', sans-serif;
        }

        .footer-inner {
            max-width: 1280px;
            margin: 0 auto;
        }

        .footer-logo {
            font-size: 32px;
            font-weight: 800;
            font-family: 'Sofia Sans', sans-serif;
            margin-bottom: 36px;
        }

        .footer-grid {
            display: flex;
            flex-wrap: wrap;
            gap: 80px;
            margin-bottom: 40px;
        }

        .footer-column {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .footer-column a {
            color: #FFFFFF;
            text-decoration: none;
            font-weight: 400;
            font-size: 16px;
            letter-spacing: 0.5px;
        }

        .footer-copy {
            color: #EBECF2;
            font-size: 16px;
        }

        .header-area {
            display: flex;
            flex-direction: column;
            gap: 10px;
            max-width: 1200px;
            margin: 20px auto 0;
            padding: 0 20px;
        }

        .top-bar {
            display: flex;
            align-items: center;
        }

        .top-bar .tags {
            display: flex;
            gap: 10px;
        }

        .tag {
            background-color: #e0e0e0;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 14px;
            cursor: pointer;
        }

        .tag.active {
            background-color: #101f35;
            color: white;
        }

        .search-bar {
            display: flex;
            gap: 10px;
            align-items: center;
        }

        .search-bar input {
            padding: 8px 12px;
            border-radius: 6px;
            border: 1px solid #ccc;
            flex: 1;
        }

        .search-bar button {
            background-color: #101f35;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 6px;
            cursor: pointer;
        }

        .filter-bar {
            display: flex;
            gap: 20px;
            padding: 10px 0;
            align-items: center;
        }

        .filter-btn {
            background: none;
            border: none;
            font-size: 16px;
            color: #ff4bd8;
            cursor: pointer;
            font-weight: 500;
        }

        .filter-btn:hover {
            text-decoration: underline;
        }

        .container {
            max-width: 1200px;
            margin: 20px auto;
            display: flex;
            gap: 24px;
            padding: 0 20px;
        }

        .sidebar {
            width: 250px;
            background: #fff;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
            font-size: 14px;
            flex-shrink: 0;
        }

        .sidebar h4 {
            margin-top: 20px;
            margin-bottom: 8px;
            font-weight: bold;
        }

        .sidebar label {
            display: block;
            margin-bottom: 6px;
        }

        .profiles {
            flex: 1;
        }

        .profile-card {
            background: white;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
        }

        .profile-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .profile-info {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .profile-info img {
            width: 40px;
            height: 40px;
            border-radius: 50%;
        }

        .profile-info .name {
            font-weight: bold;
        }

        .profile-info .location {
            font-size: 12px;
            color: gray;
        }

        .hire-btn {
            background: #ff4bd8;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 6px;
            font-weight: bold;
            cursor: pointer;
            margin-left: 10px;
        }

        body.dark-mode {
            background: #121212;
            color: #eee;
        }

        .dark-mode .header,
        .dark-mode .filters,
        .dark-mode .job-card,
        .dark-mode .profile-card,
        .dark-mode .sidebar {
            background: #1e1e1e;
            border-color: #333;
        }

        .dark-mode .nav a,
        .dark-mode .company,
        .dark-mode .tags,
        .dark-mode .filter-btn {
            color: #ccc;
        }

        .dark-mode .logo {
            color: #ff74e8;
        }

        .dark-mode .apply-btn,
        .dark-mode .hire-btn,
        .dark-mode .search-bar button {
            background-color: #ff4bd8;
            color: white;
        }

        .dark-mode .page {
            background: #333;
            color: #eee;
        }

        .dark-mode .page.active {
            background: #ff4bd8;
            color: white;
        }

        .dark-mode .footer {
            background: #000;
            color: #eee;
        }

        .dark-mode .footer a {
            color: #ccc;
        }

        .mobile-topbar {
            display: none;
        }

        .filters {
            display: none;
        }

        @media (max-width: 480px) {
            body {
                font-size: 15px;
            }

            /* Скрываем десктопный header и поиск */
            .header,
            .search-profile,
            .search-bar {
                display: none !important;
            }

            /* Mobile topbar (бургер, поиск, сообщение) */
            .mobile-topbar {
                display: flex;
                align-items: center;
                justify-content: space-between;
                background: #fff;
                padding: 12px 16px;
                box-shadow: 0 2px 6px rgba(0, 0, 0, 0.06);
            }

            .mobile-search-input {
                flex: 1;
                margin: 0 12px;
                padding: 8px 12px;
                border: 1px solid #ccc;
                border-radius: 8px;
            }

            /* Top-bar с тегами и Hire */
            .top-bar {
                display: flex;
                align-items: center;
                justify-content: space-between;
                padding: 12px 16px;
                flex-wrap: wrap;
                gap: 10px;
            }

            .tags {
                display: flex;
                gap: 10px;
                flex-wrap: wrap;
            }

            .tag {
                background: #e0e0e0;
                padding: 6px 12px;
                border-radius: 20px;
                font-size: 14px;
                white-space: nowrap;
            }

            .tag.active {
                background-color: #101f35;
                color: white;
            }

            .hire-btn {
                background: #ff4bd8;
                color: white;
                padding: 8px 16px;
                border-radius: 8px;
                border: none;
                font-weight: bold;
                cursor: pointer;
            }

            /* Filter toggle */
            .filter-toggle-btn {
                display: inline-block;
                margin: 10px 16px 0;
                padding: 10px 16px;
                background: white;
                border: 1px solid #ddd;
                border-radius: 8px;
                font-weight: 500;
                cursor: pointer;
            }

            /* Filter panel */
            .filters {
                display: none;
                width: 100%;
                margin: 10px 0;
                padding: 16px;
                background: #fff;
                border-top: 1px solid #ddd;
            }

            .filters.active {
                display: block;
            }

            .filters h4 {
                margin-top: 10px;
            }

            .filters label {
                display: block;
                margin: 6px 0;
            }

            /* Filter section */
            .filter-section {
                padding: 0 16px;
            }

            .filter-title {
                font-weight: bold;
                font-size: 18px;
                margin: 12px 0 8px;
            }

            .filter-buttons {
                display: flex;
                gap: 16px;
                margin-bottom: 16px;
            }

            .filter-btn {
                background: none;
                border: none;
                color: #f052e3;
                font-weight: 500;
                cursor: pointer;
            }

            /* Job cards */
            .job-card {
                margin: 0 16px 16px;
                padding: 16px;
                border: 1px solid #ddd;
                border-radius: 12px;
                background: #fff;
            }

            .job-card h3 {
                font-size: 16px;
                margin-bottom: 6px;
            }

            .job-card .salary {
                font-weight: bold;
                font-size: 14px;
                margin-bottom: 6px;
            }

            .job-card .tags {
                display: flex;
                gap: 8px;
                flex-wrap: wrap;
                font-size: 12px;
                color: #666;
                margin-bottom: 8px;
            }

            .job-card .company {
                font-size: 14px;
                color: #444;
            }

            .apply-btn {
                margin-top: 12px;
                background: #f052e3;
                color: white;
                border: none;
                padding: 8px 16px;
                border-radius: 6px;
                font-weight: bold;
                cursor: pointer;
            }

            /* Load More button */
            .load-more-btn {
                display: none;
            }

            /* Footer */
            .footer {
                padding: 32px 16px;
            }

            .footer-columns {
                flex-direction: column;
                gap: 20px;
            }
        }

    :root {
        --padding-x: clamp(1rem, 5vw, 4rem);
        --max-width: 1280px;
    }

    * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
    }

    body {
        font-family: 'General Sans', sans-serif;
        background: #fff;
    }

    .dropdown {
        position: relative;
    }

    .dropbtn {
        background: none;
        border: none;
        color: #BFBFBF;
        font-size: 1rem;
        font-weight: 600;
        cursor: pointer;
        padding: 0;
    }

    .dropbtn:hover,
    .dropbtn:focus {
        color: #0B304A;
    }

    .dropdown-content {
        display: none;
        position: absolute;
        background-color: white;
        min-width: 160px;
        box-shadow: 0px 8px 16px rgba(0, 0, 0, 0.2);
        z-index: 1000;
        border-radius: 6px;
        margin-top: 10px;
    }

    .dropdown-content a {
        color: black;
        padding: 10px 16px;
        text-decoration: none;
        display: block;
    }

    .dropdown-content a:hover {
        background-color: #f1f1f1;
    }

    .show {
        display: block;
    }

    .navbar {
        display: flex;
        justify-content: center;
        align-items: center;
        padding: 1rem var(--padding-x);
        background: #ffffff;
        box-shadow: 0 0.375rem 0.75rem rgba(132, 140, 156, 0.2);
        position: sticky;
        top: 0;
        z-index: 999;
        background-color: white;
        padding: 10px 20px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.1);
    }

    .navbar-container {
        display: flex;
        justify-content: space-between;
        align-items: center;
        width: 100%;
        max-width: var(--max-width);
        gap: clamp(1rem, 5vw, 3.5rem);
    }

    .logo {
        font-size: clamp(1.5rem, 2vw, 2rem);
        font-weight: 800;
        font-family: 'Sofia Sans', sans-serif;
        background: linear-gradient(90deg, #FF9EB2, #FAA5FB, #F495FF, #E2D5FF, #8F93FF);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
    }

    .menu {
        display: flex;
        gap: clamp(1rem, 3vw, 2.5rem);
        list-style: none;
    }

    .menu li a {
        text-decoration: none;
        font-size: 1rem;
        font-weight: 600;
        color: #BFBFBF;
        transition: color 0.3s ease;
    }

    .menu li a.active,
    .menu li a:hover {
        color: #0B304A;
    }

    .search {
        display: flex;
        align-items: center;
        border: 2px solid #768694;
        border-radius: 0.25rem;
        padding: 0.5rem 1rem;
        flex-grow: 1;
        max-width: 20rem;
        gap: 0.5rem;
    }

    .search input {
        border: none;
        outline: none;
        font-size: 1rem;
        flex: 1;
        background: transparent;
        color: #768694;
    }

    .search i {
        color: #768694;
    }

    .search form {
        display: flex;
        align-items: center;
        width: 100%;
    }

    .search input {
        border: none;
        outline: none;
        font-size: 1rem;
        flex: 1;
        background: transparent;
        color: #768694;
        padding: 0;
        margin: 0;
    }

    .icons {
        display: flex;
        align-items: center;
        gap: 1rem;
        margin-left: 5%;
    }

    .icons i {
        font-size: 1.25rem;
        color: #0B304A;
        cursor: pointer;
    }

    .avatar-dropdown {
        position: relative;
    }

    .avatar {
        width: 2.5rem;
        height: 2.5rem;
        border-radius: 50%;
        overflow: hidden;
        border: 2px solid #BFBFBF;
    }

    .avatar img {
        width: 100%;
        height: 100%;
        object-fit: cover;
    }

    .dropdown-menu {
        position: absolute;
        top: 50px;
        right: 0;
        width: 200px;
        background: white;
        border-radius: 12px;
        box-shadow: 0 6px 12px rgba(132, 140, 156, 0.2);
        display: none;
        flex-direction: column;
        padding: 16px 0;
        z-index: 1000;
    }

    .dropdown-menu a {
        padding: 12px 20px;
        display: flex;
        align-items: center;
        gap: 12px;
        text-decoration: none;
        color: #0B304A;
        font-weight: 600;
        font-size: 16px;
        transition: background 0.2s ease;
    }

    .dropdown-menu a:hover {
        background: #F5F6F9;
        border-radius: 8px;
    }

    .show {
        display: flex;
    }


    .filter-header {
        display: flex;
        align-items: center;
        flex-wrap: wrap;
        padding: 1.5rem 5vw;
        gap: 1rem;
    }

    .tag-container {
        display: flex;
        flex-wrap: wrap;
        gap: 0.5rem;
        margin: 1rem 0;
    }

    .tag-container a.tag {
        display: inline-block;
        background: #F1F2F6;
        padding: 0.5rem 1.1rem;
        border-radius: 0.5rem;
        font-size: 0.9rem;
        color: #64748B;
        white-space: nowrap;
        text-decoration: none;
        transition: all 0.2s ease;
    }

    .tag-container a.tag:hover {
        background: #E2E4EB;
        color: #0B304A;
    }

    .tag-container a.tag.active {
        background: #0B304A;
        color: white;
        font-weight: 600;
        order: -1;
    }

    .tag-container a.tag:first-child {
        order: -2;
    }

    .tag {
        display: inline-block;
        padding: 0.5rem 1rem;
        background: #f1f2f6;
        color: #64748b;
        border-radius: 0.5rem;
        text-decoration: none;
        font-size: 0.9rem;
        transition: all 0.2s ease;
    }

    .tag:hover {
        background: #e2e4eb;
        color: #0b304a;
    }

    .tag.active {
        background: #0b304a;
        color: white;
        font-weight: 600;
    }

    .filter-btn {
        background: #0B304A;
        color: white;
        border: none;
        padding: 0.6rem 1.4rem;
        font-size: 0.95rem;
        font-weight: 600;
        border-radius: 0.5rem;
        cursor: pointer;
        display: flex;
        align-items: center;
        gap: 0.5rem;
        margin-left: 12rem;
    }

    .new-discussion-btn {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 0.75rem;
        margin-left: 6rem;
        padding: 0.75rem 1.75rem;
        background: #FF50D6;
        color: white;
        border: none;
        border-radius: 0.5rem;
        font-size: 1rem;
        font-weight: 600;
        cursor: pointer;

        transition: background 0.3s ease;
    }

    .new-discussion-btn i {
        font-size: 1rem;
    }

    /* Optional hover effect */
    .new-discussion-btn:hover {
        background: #e946c1;
    }

    .section-heading {
        width: 100%;
        max-width: 920px;
        font-family: 'General Sans', sans-serif;
        font-style: normal;
        font-weight: 600;
        font-size: 1.25rem; /* 20px */
        line-height: 1.1;
        letter-spacing: 0.5px;
        color: #0B304A;

        display: flex;
        align-items: center;
        margin: 0 4rem;
    }

    .post {
        margin: 2vh 3rem;
    }

    .post-card {
        font-family: 'General Sans', sans-serif;
        color: #0B304A;
        width: 65vw;
        padding: 2rem;
        background: #ffffff;
        border: 0.125rem solid #ebecf2;
        border-radius: 0.5rem;
        display: flex;
        flex-direction: column;
        box-sizing: border-box;
        margin: 2vh 0;
    }

    .post-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 0.75rem;
    }

    .user-info {
        display: flex;
        align-items: center;
        gap: 0.75rem;
    }

    .avatar {
        width: 2.5rem;
        height: 2.5rem;
        border: 0.0625rem solid #0B304A;
        border-radius: 50%;
        object-fit: cover;
    }

    .username {
        font-weight: 600;
        font-size: 0.9rem;
        letter-spacing: 0.03rem;
    }

    .dots {
        font-size: 1.25rem;
        cursor: pointer;
    }

    .dots svg {
        pointer-events: none;
    }

    .post-content {
        padding-left: clamp(2rem, 4vw, 3rem);
    }

    .post-title {
        font-size: clamp(1.2rem, 2.5vw, 1.5rem);
        font-weight: 600;
        letter-spacing: 0.03rem;
        margin: 0 0 0.5rem;
    }

    .post-text {
        font-size: clamp(0.9rem, 1.5vw, 1rem);
        font-weight: 400;
        letter-spacing: 0.03rem;
        line-height: 1.6;
        margin: 0 0 1rem;
    }

    .post-images {
        display: flex;
        flex-wrap: nowrap; /* отключаем перенос */
        gap: 1rem;
        overflow-x: auto; /* добавляем скролл при необходимости */
        margin-bottom: 1rem;
    }

    .post-images img {
        height: 10rem;
        width: auto;
        border-radius: 0.75rem;
        object-fit: cover;
        flex-shrink: 0; /* чтобы не сжимались */
    }

    .post-images::-webkit-scrollbar {
        display: none; /* Chrome, Safari, Opera */
    }

    .no-results {
        text-align: center;
        padding: 4rem 2rem;
        max-width: 500px;
        margin: 0 auto;
    }

    .no-results-image {
        width: 150px;
        height: 150px;
        margin-bottom: 1.5rem;
        opacity: 0.7;
    }

    .no-results h3 {
        font-size: 1.5rem;
        color: #0B304A;
        margin-bottom: 0.5rem;
    }

    .no-results p {
        color: #64748B;
        margin-bottom: 1.5rem;
    }

    .create-discussion-btn {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        gap: 0.75rem;
        padding: 0.75rem 1.75rem;
        background: #FF50D6;
        color: white;
        border: none;
        border-radius: 0.5rem;
        font-size: 1rem;
        font-weight: 600;
        cursor: pointer;
        text-decoration: none;
        transition: background 0.3s ease;
    }

    .create-discussion-btn:hover {
        background: #e946c1;
    }

    .tags {
        display: flex;
        gap: 0.5rem;
        margin-bottom: 1rem;
    }

    .tag {
        background: #EBECF2;
        color: #768694;
        font-size: 0.75rem;
        padding: 0.375rem 0.5rem;
        border-radius: 0.5rem;
    }

    .reactions {
        display: flex;
        gap: 1.75rem;
        align-items: center;
    }

    .reaction {
        display: flex;
        align-items: center;
        gap: 0.25rem;
        font-weight: 600;
        font-size: 0.875rem;
    }

    .reaction svg {
        width: 1.25rem;
        height: 1.25rem;
        color: #0B304A;
    }

    .pagination {
        display: flex;
        justify-content: center;
        align-items: center;
        gap: 0.5rem;
        margin: 2rem 0;
        flex-wrap: wrap;
    }

    .pagination a {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        padding: 0.5rem 0.75rem;
        min-width: 2.5rem;
        height: 2.5rem;
        text-decoration: none;
        color: #0B304A;
        border: 1px solid #EBECF2;
        border-radius: 0.5rem;
        transition: all 0.2s ease;
        font-weight: 500;
    }

    .pagination a:hover {
        background: #F5F6F9;
    }

    .pagination a.active {
        background: #FF4DC4;
        color: white;
        border-color: #FF4DC4;
    }

    .pagination .page-nav {
        padding: 0.5rem;
        border-radius: 50%;
        width: 2.5rem;
        height: 2.5rem;
        display: inline-flex;
        align-items: center;
        justify-content: center;
    }

    .pagination .page-nav:hover {
        background: #F5F6F9;
    }

    .pagination .page-nav svg {
        width: 1rem;
        height: 1rem;
    }

    .pagination .page-nav:hover svg path {
        stroke: #FF4DC4;
    }

    .sidebar-right {
        width: 280px;
        display: flex;
        flex-direction: column;
        gap: 2rem;
        padding: 1.2rem 2rem;
    }

    .sidebar-right h4 {
        font-weight: 600;
        font-size: 1rem;
        color: #0B304A;
        margin-bottom: 1rem;
    }

    .popular-now {
        background: #ffffff;
        border-radius: 12px;
        padding: 20px;
        width: 280px;
        box-shadow: 0 2px 6px rgba(0, 0, 0, 0.05);
        border: 1px solid #e5e7eb;
    }

    .popular-now h4 {
        color: #ff4dc4;
        font-size: 1rem;
        font-weight: 700;
        margin-bottom: 16px;
        font-family: 'General Sans', sans-serif;
    }

    .popular-now .tags {
        display: flex;
        flex-wrap: wrap;
        gap: 10px;
    }

    .popular-now .tag {
        background-color: #f1f3f8;
        color: #64748b;
        padding: 6px 12px;
        border-radius: 10px;
        font-size: 14px;
        font-weight: 500;
    }

    .main-container {
        display: flex;
    }

    .recently-viewed {
        background: #ffffff;
        border-radius: 12px;
        padding: 20px;
        width: 280px;
        box-shadow: 0 2px 6px rgba(0, 0, 0, 0.05);
        border: 1px solid #e5e7eb;
    }

    a {
        text-decoration: none;
    }

    .recently-viewed h4 {
        font-size: 1rem;
        color: #ff50d6;
        font-weight: 700;
        margin-bottom: 1rem;
    }

    .recently-viewed .tags {
        display: flex;
        flex-wrap: wrap;
        gap: 0.5rem;
        margin-bottom: 1rem;
    }

    .recently-viewed .tag {
        background: #F1F3F8;
        color: #64748B;
        padding: 0.3rem 0.75rem;
        font-size: 0.85rem;
        border-radius: 8px;
        white-space: nowrap;
    }

    .viewed-card {
        border: 2px solid #0B304A;
        border-radius: 8px;
        padding: 0.75rem;
        margin-bottom: 0.75rem;
        font-size: 0.9rem;
        color: #0B304A;
    }

    .viewed-card a {
        display: block;
        margin-top: 0.5rem;
        font-size: 0.8rem;
        color: #64748B;
        text-decoration: none;
    }

    .footer {
        background-color: #0B304A;
        padding: 48px 80px 40px;
        margin-top: 50px;
        color: #FFFFFF;
        font-family: 'General Sans', sans-serif;
    }

    .footer-inner {
        max-width: 1280px;
        margin: 0 auto;
    }

    .footer-logo {
        font-size: 32px;
        font-weight: 800;
        font-family: 'Sofia Sans', sans-serif;
        margin-bottom: 36px;
    }

    .footer-grid {
        display: flex;
        flex-wrap: wrap;
        gap: 80px;
        margin-bottom: 40px;
    }

    .footer-column {
        display: flex;
        flex-direction: column;
        gap: 12px;
    }

    .footer-column a {
        color: #FFFFFF;
        text-decoration: none;
        font-weight: 400;
        font-size: 16px;
        letter-spacing: 0.5px;
    }

    .footer-copy {
        color: #EBECF2;
        font-size: 16px;
    }

    .dots-container {
        position: relative;
    }

    .post-dropdown-menu {
        position: absolute;
        right: 0;
        top: 100%;
        background: white;
        border-radius: 8px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        padding: 0.5rem 0;
        width: 160px;
        z-index: 100;
        display: none;
    }

    .post-dropdown-menu.show {
        display: block;
    }

    .post-dropdown-menu a {
        display: flex;
        align-items: center;
        gap: 0.75rem;
        padding: 0.5rem 1rem;
        color: #0B304A;
        text-decoration: none;
        font-size: 0.9rem;
    }

    .post-dropdown-menu a:hover {
        background: #F5F6F9;
    }

    .post-dropdown-menu i {
        width: 16px;
        text-align: center;
    }

    .delete-btn {
        color: #EF4444 !important;
    }

    .modal {
        display: none;
        position: fixed;
        z-index: 1000;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.4);
        align-items: center;
        justify-content: center;
    }

    .modal-content {
        background-color: #fff;
        padding: 20px;
        border-radius: 8px;
        width: 400px;
        max-width: 90%;
        position: relative;
        margin: 0;
        transform: translateY(0);
        animation: modalFadeIn 0.3s ease-out;
    }

    @keyframes modalFadeIn {
        from {
            opacity: 0;
            transform: translateY(-20px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    .modal-content textarea {
        width: 100%;
        height: 120px;
        padding: 10px;
        margin: 10px 0;
        border: 1px solid #ddd;
        border-radius: 4px;
    }

    .modal-content button {
        background-color: #FF42C2;
        color: white;
        border: none;
        padding: 8px 16px;
        border-radius: 4px;
        cursor: pointer;
    }

    .close {
        color: #aaa;
        float: right;
        font-size: 28px;
        font-weight: bold;
        cursor: pointer;
    }


    /* Filter Modal Styles */
    .filter-section {
        margin-bottom: 1.5rem;
    }

    .filter-section h4 {
        font-size: 1rem;
        color: #0B304A;
        margin-bottom: 0.75rem;
        font-weight: 600;
    }

    .filter-options {
        display: flex;
        flex-direction: column;
        gap: 0.5rem;
    }

    .filter-option {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        cursor: pointer;
        font-size: 0.9rem;
        color: #64748B;
    }

    .filter-option input {
        margin: 0;
    }

    .tag-selector {
        position: relative;
    }

    .tag-select {
        width: 100%;
        min-height: 100px;
        border: 1px solid #EBECF2;
        border-radius: 8px;
        padding: 8px;
        font-size: 0.9rem;
        color: #0B304A;
    }

    .tag-select option {
        padding: 6px 8px;
        border-radius: 4px;
        margin: 2px 0;
    }

    .tag-select option:checked {
        background-color: #FF50D6;
        color: white;
    }

    .filter-actions {
        display: flex;
        justify-content: flex-end;
        gap: 1rem;
        margin-top: 1.5rem;
    }

    .filter-reset {
        background: none;
        border: 1px solid #EBECF2;
        color: #64748B;
        padding: 0.5rem 1rem;
        border-radius: 6px;
        cursor: pointer;
        font-weight: 500;
        display: flex;
        align-items: center;
        gap: 0.5rem;
        transition: all 0.2s ease;
    }

    .filter-reset:hover {
        background: #F5F6F9;
        color: #0B304A;
    }

    .filter-reset i {
        font-size: 0.9rem;
    }

    .filter-apply {
        background: #FF50D6;
        color: white;
        border: none;
        padding: 0.5rem 1.5rem;
        border-radius: 6px;
        cursor: pointer;
        font-weight: 600;
    }

    .filter-apply:hover {
        background: #e946c1;
    }


    .card {
        display: flex;
    }

    /* Секция "My Activity" */
    .activity-card {
        width: 60%;
        margin: 30px 40px;
    }

    .pink {
        font-size: 20px;
        background: linear-gradient(to right, #FF9EB2, #FAA5FB, #F495FF, #E2D5FF, #8F93FF);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
    }

    .active-days {
        color: #ff52bf;
        font-size: 16px;
        margin-top: -15px;
    }

    .calendar {
        display: grid;
        grid-template-columns: repeat(7, 1fr);
    }

    .day {
        font-weight: bold;
        font-size: 14px;
        color: #555;
    }

    .circle {
        width: 24px;
        height: 24px;
        border-radius: 50%;
        background-color: #eee;
    }

    .circle.active {
        background-color: #ff52bf;
    }

    .circle.inactive {
        background-color: #f7d6eb;
    }

</style>
<body>
<header>
    <nav class="navbar">
        <div class="navbar-container">
            <svg width="148" height="32" viewBox="0 0 148 32" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M35.7454 2L21.0345 21.389L12.7855 10.5153V28.9968H7V2H12.7855L21.0345 12.8211L29.2836 2H35.7454Z"
                      fill="#0B304A"/>
                <path d="M35.444 29H19.9097L23.8029 23.67H34.2526C36.0047 23.67 37.4239 22.2473 37.4239 20.4952C37.4239 19.6191 37.07 18.8272 36.4953 18.2525C35.9206 17.6778 35.1286 17.3203 34.2526 17.3203H28.439L31.9573 12.502H33.9442C35.4826 12.502 36.7301 11.2545 36.7301 9.7161C36.7301 8.94516 36.4182 8.25132 35.9136 7.74671C35.8225 7.6556 35.7209 7.56799 35.6192 7.4909L38.7661 3.18066C42.7294 4.1969 42.9256 13.4656 38.7661 14.6956C45.8902 16.3532 43.2655 29 35.444 29Z"
                      fill="#FF50D6"/>
                <path d="M63.3592 20.4568H60.6504L59.8935 13.8618L57.3704 19.1287H55.352L52.8289 13.8793L52.0545 20.4568H49.3457L50.7754 8.86475H52.9796L56.3612 16.115L59.6903 8.86475H61.9435L63.3557 20.4568H63.3592Z"
                      fill="#0B304A"/>
                <path d="M64.7051 9.97949C64.7051 9.15599 65.4129 8.53223 66.254 8.53223C67.095 8.53223 67.7678 9.15599 67.7678 9.97949C67.7678 10.803 67.095 11.4267 66.254 11.4267C65.4129 11.4267 64.7051 10.7714 64.7051 9.97949ZM65.0064 20.4572V12.6007H67.4945V20.4572H65.0064Z"
                      fill="#0B304A"/>
                <path d="M77.439 16.234V20.4567H74.9509V16.3847C74.9509 15.1723 74.2115 14.7027 73.5878 14.7027C72.915 14.7027 72.0739 15.0566 72.0739 16.3672V20.4567H69.5859V12.6001H72.0739V13.9633C72.3753 12.8875 73.6053 12.4004 74.3272 12.4004C76.4122 12.4004 77.439 13.8301 77.439 16.2375V16.234Z"
                      fill="#0B304A"/>
                <path d="M85.2259 8.3287H87.7V20.4569H85.2259V19.5809C84.6547 20.3378 83.593 20.6567 82.787 20.6567C80.8351 20.6567 78.9849 19.0587 78.9849 16.5181C78.9849 13.9776 80.8351 12.3971 82.787 12.3971C83.593 12.3971 84.6547 12.716 85.2259 13.4554V8.3252V8.3287ZM85.1243 16.5216C85.1243 15.5124 84.2658 14.7064 83.3231 14.7064C82.3805 14.7064 81.5079 15.5299 81.5079 16.5216C81.5079 17.5133 82.3489 18.3544 83.3231 18.3544C84.2973 18.3544 85.1243 17.5309 85.1243 16.5216Z"
                      fill="#0B304A"/>
                <path d="M98.8505 17.1278C98.8505 18.7082 97.8238 20.4568 95.0975 20.4568H90.0688V8.86475H94.761C96.8811 8.86475 98.2443 10.1438 98.2443 11.8574C98.2443 12.6634 97.9429 13.8758 96.6113 14.2648C98.1427 14.4821 98.847 15.7962 98.847 17.1243L98.8505 17.1278ZM94.5788 11.1741H92.7111V13.3957H94.5613C95.1851 13.3957 95.6056 12.9928 95.6056 12.2849C95.6056 11.6962 95.3042 11.1741 94.5788 11.1741ZM94.7786 18.1545C95.7212 18.1545 96.1908 17.5167 96.1908 16.8579C96.1908 16.2517 95.7703 15.5614 94.7786 15.5614H92.7111V18.151H94.7786V18.1545Z"
                      fill="#0B304A"/>
                <path d="M106.437 12.6352L105.848 15.0076C105.361 14.7202 104.972 14.7062 104.719 14.7062C103.745 14.7062 102.936 15.5297 102.936 17.853V20.4602H100.448V12.6036H102.904V14.2682C103.36 12.9716 104.299 12.4004 105.259 12.4004C105.631 12.4004 106.034 12.4354 106.437 12.6352Z"
                      fill="#0B304A"/>
                <path d="M107.225 9.97949C107.225 9.15599 107.933 8.53223 108.774 8.53223C109.615 8.53223 110.288 9.15599 110.288 9.97949C110.288 10.803 109.615 11.4267 108.774 11.4267C107.933 11.4267 107.225 10.7714 107.225 9.97949ZM107.53 20.4572V12.6007H110.018V20.4572H107.53Z"
                      fill="#0B304A"/>
                <path d="M117.906 8.3287H120.38V20.4569H117.906V19.5809C117.335 20.3378 116.273 20.6567 115.467 20.6567C113.515 20.6567 111.665 19.0587 111.665 16.5181C111.665 13.9776 113.515 12.3971 115.467 12.3971C116.273 12.3971 117.335 12.716 117.906 13.4554V8.3252V8.3287ZM117.808 16.5216C117.808 15.5124 116.949 14.7064 116.007 14.7064C115.064 14.7064 114.192 15.5299 114.192 16.5216C114.192 17.5133 115.033 18.3544 116.007 18.3544C116.981 18.3544 117.808 17.5309 117.808 16.5216Z"
                      fill="#0B304A"/>
                <path d="M128.268 12.6035H130.742V19.5174C130.742 22.8465 128.994 24.532 126.148 24.532C124.365 24.532 122.851 23.4878 122.23 22.009L124.284 21.1855C124.571 21.8232 125.328 22.3454 126.152 22.3454C127.448 22.3454 128.272 21.6235 128.272 19.8223V19.5875C127.683 20.3269 126.639 20.6633 125.833 20.6633C123.881 20.6633 122.031 19.0654 122.031 16.5248C122.031 13.9842 123.881 12.4038 125.833 12.4038C126.639 12.4038 127.683 12.7227 128.272 13.4621V12.6035H128.268ZM128.167 16.5213C128.167 15.5121 127.308 14.7061 126.366 14.7061C125.423 14.7061 124.55 15.5296 124.55 16.5213C124.55 17.513 125.391 18.354 126.366 18.354C127.34 18.354 128.167 17.5305 128.167 16.5213Z"
                      fill="#0B304A"/>
                <path d="M140.715 17.2608H134.961C135.196 18.0177 135.851 18.4873 136.794 18.4873C137.533 18.4873 138.29 18.1509 138.777 17.6813L140.056 19.2968C139.282 20.1378 137.936 20.6599 136.625 20.6599C134.137 20.6599 132.385 18.9428 132.385 16.5564C132.385 13.9983 134.355 12.4004 136.608 12.4004C138.861 12.4004 140.746 13.9808 140.746 16.3707C140.746 16.588 140.729 16.8753 140.711 17.2608H140.715ZM138.276 15.7995C138.241 15.0251 137.554 14.5029 136.66 14.5029C135.921 14.5029 135.196 14.8569 134.943 15.7995H138.272H138.276Z"
                      fill="#0B304A"/>
            </svg>

            <ul class="menu">
                <li><a href="{% url 'base:home' %}" class="active">Home</a></li>
                <li><a href="{% url 'base:discussions' %}">Discussions</a></li>
                <li class="dropdown">
                    <button onclick="toggleDropdown()" class="dropbtn">Library</button>
                    <div class="dropdown-content" id="libraryDropdown">
                        <a href="{% url 'library' %}">Library Home</a>
                        <a href="{% url 'library' %}">Library Book</a>
                        <a href="{% url 'library' %}">Library View</a>
                    </div>
                </li>
                <li><a href="{% url 'careers:vacancy_list' %}">Career</a></li>
            </ul>
            <div class="search">
                <i class="fas fa-search"></i>
                <input type="text" id="searchInput" placeholder="Search for..." onkeyup="filterContent()"/>
            </div>
            <div class="icons">
                {#          <a href="{% url 'messaging:messages' %}"><i class="fa-regular fa-comment"></i></a>#}
                <i class="fa-regular fa-bell"></i>
                <div class="avatar-dropdown">
                    <div class="avatar" onclick="toggleMenu()">
                        {% if user.profile.avatar %}
                            <img src="{{ user.profile.avatar.url }}" alt="Profile Picture"/>
                        {% else %}
                            <img src="/static/library/ava.png" alt="Profile Picture"/>
                        {% endif %}
                    </div>
                    <div class="dropdown-menu" id="profileMenu">
                        <a href={% url 'base:user-profile' request.user.id %}><i class="fa-regular fa-user"></i>
                            Profile</a>
                        <a href={% url 'base:edit-profile' request.user.id %}><i class="fa-solid fa-pen"></i>
                            Edit</a>
                        <a href="{% url 'base:saved-discussions' %}"><i class="fa-regular fa-bookmark"></i> Saved</a>
                        <a href={% url 'auth:logout' %}><i class="fa-solid fa-right-from-bracket"></i> Log out</a>
                    </div>
                </div>
            </div>
        </div>
    </nav>
</header>
<div class="filter-header">
    <div class="tag-container">
        <!-- Always show #all first -->
        <a href="{% url 'base:home' %}" class="tag {% if not active_tag %}active{% endif %}">#all</a>

        <!-- Show active tag first if one is selected -->
        {% if active_tag %}
            <a href="{% url 'base:home' %}?q=%23{{ active_tag|urlencode }}"
               class="tag active" style="order: 1;">
                #{{ active_tag }}
            </a>
        {% endif %}

        <!-- Show random tags (excluding active tag if one exists) -->
        {% for tag in random_tags %}
            {% if tag.name != active_tag %}
                <a href="{% url 'base:home' %}?q=%23{{ tag.name|urlencode }}"
                   class="tag" style="order: {{ forloop.counter|add:2 }};">
                    #{{ tag.name }}
                </a>
            {% endif %}
        {% endfor %}
    </div>
    <button class="filter-btn" onclick="openFilterModal()">
        <i class="fa-solid fa-sliders"></i> Filter
    </button>
    <a href={% url 'base:create-discussion' %} class="new-discussion-btn">
        <svg width="17" height="16" viewBox="0 0 17 16" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M8.5 15C12.366 15 15.5 11.866 15.5 8C15.5 4.13401 12.366 1 8.5 1C4.63401 1 1.5 4.13401 1.5 8C1.5 11.866 4.63401 15 8.5 15Z"
                  stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            <path d="M8.5 4.76904V11.2306" stroke="white" stroke-width="2" stroke-linecap="round"
                  stroke-linejoin="round"/>
            <path d="M5.26953 8H11.7311" stroke="white" stroke-width="2" stroke-linecap="round"
                  stroke-linejoin="round"/>
        </svg>
        New discussion
    </a>

</div>
<a href="{% url 'base:home' %}"><h2 class="section-heading">Newest discussions</h2></a>
<div class="main-container">

    <div class="post">


        {% if discussions %}
            {% for discussion in discussions %}

                <div class="post-card">
                    <div class="post-header">
                        <div class="user-info">
                            {% if discussion.host.profile.avatar %}
                                <div class="avatar" onclick="toggleMenu()">
                                    <img src="{{ discussion.host.profile.avatar.url }}" alt="missing profile picture"/>
                                </div>
                            {% else %}
                                <div class="avatar" onclick="toggleMenu()">
                                    <img src="{% static 'icons/no_avatar.jpg' %}" alt="missing profile picture"/>
                                </div>
                            {% endif %}
                            <span class="username">{{ discussion.host.username }}</span>
                        </div>
                        <div class="dots-container">
                            <div class="dots" onclick="togglePostMenu(this)">
                                <svg width="14" height="14" viewBox="0 0 14 14" fill="none"
                                     xmlns="http://www.w3.org/2000/svg">
                                    <path d="M12 8.5C12.8284 8.5 13.5 7.82843 13.5 7C13.5 6.17157 12.8284 5.5 12 5.5C11.1716 5.5 10.5 6.17157 10.5 7C10.5 7.82843 11.1716 8.5 12 8.5Z"
                                          fill="#0B304A"/>
                                    <path d="M7 8.5C7.82843 8.5 8.5 7.82843 8.5 7C8.5 6.17157 7.82843 5.5 7 5.5C6.17157 5.5 5.5 6.17157 5.5 7C5.5 7.82843 6.17157 8.5 7 8.5Z"
                                          fill="#0B304A"/>
                                    <path d="M2 8.5C2.82843 8.5 3.5 7.82843 3.5 7C3.5 6.17157 2.82843 5.5 2 5.5C1.17157 5.5 0.5 6.17157 0.5 7C0.5 7.82843 1.17157 8.5 2 8.5Z"
                                          fill="#0B304A"/>
                                </svg>
                            </div>
                            <div class="post-dropdown-menu">
                                {% if request.user == discussion.host %}
                                    <a href="{% url 'base:update-discussion' discussion.id %}">
                                        <i class="fa-solid fa-pen"></i> Edit
                                    </a>
                                    <a href="{% url 'base:delete-discussion' discussion.id %}" class="delete-btn">
                                        <i class="fa-solid fa-trash"></i> Delete
                                    </a>
                                    <a href="#" class="save-btn" data-discussion-id="{{ discussion.id }}">
                                        <i class="fa-regular fa-bookmark"></i>
                                        <span class="save-text">
                                        {% if request.user in discussion.saved_by.all %}Unsave{% else %}Save{% endif %}
                                    </span>
                                    </a>
                                {% else %}
                                    <a href="#" class="save-btn" data-discussion-id="{{ discussion.id }}">
                                        <i class="fa-regular fa-bookmark"></i>
                                        <span class="save-text">
                                        {% if request.user in discussion.saved_by.all %}Unsave{% else %}Save{% endif %}
                                    </span>
                                    </a>
                                    <a href="#" class="report-btn" data-discussion-id="{{ discussion.id }}">
                                        <i class="fa-solid fa-flag"></i> Report
                                    </a>
                                {% endif %}
                            </div>

                            <div id="reportModal" class="modal">
                                <div class="modal-content">
                                    <span class="close">&times;</span>
                                    <h3>Report Discussion</h3>
                                    <form id="reportForm">
                                        <input type="hidden" id="reportDiscussionId" value="">
                                        <textarea id="reportReason"
                                                  placeholder="Please explain the reason for reporting..."
                                                  required></textarea>
                                        <div id="reportError" style="color: red; display: none;"></div>
                                        <button type="submit">Submit Report</button>
                                    </form>
                                </div>
                            </div>

                            <style>
                                .modal {
                                    display: none;
                                    position: fixed;
                                    z-index: 1000;
                                    left: 0;
                                    top: 0;
                                    width: 100%;
                                    height: 100%;
                                    background-color: rgba(0, 0, 0, 0.4);
                                }

                                .modal-content {
                                    background-color: #fff;
                                    margin: 15% auto;
                                    padding: 20px;
                                    border-radius: 8px;
                                    width: 400px;
                                    max-width: 90%;
                                }

                                .modal-content h3 {
                                    margin-top: 0;
                                    color: #0B304A;
                                }

                                .modal-content textarea {
                                    width: 100%;
                                    height: 120px;
                                    padding: 10px;
                                    margin: 10px 0;
                                    border: 1px solid #ddd;
                                    border-radius: 4px;
                                    resize: vertical;
                                }

                                .modal-content button {
                                    background-color: #FF42C2;
                                    color: white;
                                    border: none;
                                    padding: 8px 16px;
                                    border-radius: 4px;
                                    cursor: pointer;
                                    font-size: 1rem;
                                }

                                .close {
                                    color: #aaa;
                                    float: right;
                                    font-size: 28px;
                                    font-weight: bold;
                                    cursor: pointer;
                                }

                                .close:hover {
                                    color: #000;
                                }
                            </style>
                        </div>
                    </div>
                    <div class="post-content">
                        <a href={% url 'base:discussion' pk=discussion.id %} style="text-decoration:none;color:#0B304A;">
                            <h2 class="post-title">{{ discussion.title }}</h2>
                            <p class="post-text">
                                {{ discussion.content }}
                            </p></a>
                        <div class="tags">

                            {% for tag in discussion.tags.all %}
                                <span class="tag">#{{ tag }}</span>
                            {% endfor %}
                        </div>

                        <div class="reactions">
                            <div class="reaction">
                                <svg width="22" height="20" viewBox="0 0 22 20" fill="none"
                                     xmlns="http://www.w3.org/2000/svg">
                                    <path d="M5.81348 8.35737L9.44205 2.55737C9.58267 2.32812 9.78028 2.1392 10.0156 2.00902C10.2509 1.87884 10.516 1.81182 10.7849 1.81451V1.81451C10.9967 1.80686 11.2079 1.84175 11.406 1.91712C11.6041 1.99248 11.785 2.10679 11.9382 2.25329C12.0913 2.39978 12.2136 2.5755 12.2977 2.77004C12.3818 2.96458 12.426 3.17401 12.4278 3.38594V7.54308H18.6992C18.9309 7.5506 19.1584 7.60708 19.3668 7.70881C19.5751 7.81054 19.7596 7.95523 19.908 8.13334C20.0564 8.31146 20.1655 8.51898 20.228 8.74225C20.2905 8.96553 20.305 9.1995 20.2706 9.42879L19.1278 16.8002C19.079 17.1942 18.8881 17.5567 18.5908 17.8198C18.2935 18.0829 17.9104 18.2283 17.5135 18.2288H8.14205C7.69593 18.2305 7.25561 18.1278 6.85633 17.9288L5.82776 17.4145"
                                          stroke="#0B304A" stroke-width="2" stroke-linecap="round"
                                          stroke-linejoin="round"/>
                                    <path d="M5.81348 8.35742V17.3717" stroke="#0B304A" stroke-width="2"
                                          stroke-linecap="round"
                                          stroke-linejoin="round"/>
                                    <path d="M2.42815 8.35742H5.81387V17.3717H2.42815C2.23871 17.3717 2.05703 17.2965 1.92308 17.1625C1.78912 17.0285 1.71387 16.8469 1.71387 16.6574V9.07171C1.71387 8.88227 1.78912 8.70059 1.92308 8.56663C2.05703 8.43268 2.23871 8.35742 2.42815 8.35742V8.35742Z"
                                          stroke="#0B304A" stroke-width="2" stroke-linecap="round"
                                          stroke-linejoin="round"/>
                                </svg>
                                <span></span></div>
                            <div class="reaction">
                                <svg width="22" height="20" viewBox="0 0 22 20" fill="none"
                                     xmlns="http://www.w3.org/2000/svg">
                                    <path d="M16.1895 11.6832L12.5609 17.4832C12.4203 17.7124 12.2227 17.9013 11.9873 18.0315C11.752 18.1617 11.487 18.2287 11.218 18.226V18.226C11.0062 18.2337 10.795 18.1988 10.597 18.1234C10.3989 18.048 10.2179 17.9337 10.0647 17.7872C9.91159 17.6407 9.78935 17.465 9.70526 17.2705C9.62118 17.0759 9.57694 16.8665 9.57517 16.6546V12.4974H3.30374C3.072 12.4899 2.84448 12.4334 2.63614 12.3317C2.42779 12.23 2.24334 12.0853 2.09491 11.9072C1.94648 11.7291 1.83743 11.5215 1.77493 11.2983C1.71244 11.075 1.69791 10.841 1.73231 10.6117L2.87517 3.2403C2.92391 2.84635 3.11486 2.48378 3.41213 2.22071C3.70939 1.95764 4.0925 1.81221 4.48945 1.81173H13.8609C14.307 1.80998 14.7473 1.91272 15.1466 2.11173L16.1752 2.62602"
                                          stroke="#0B304A" stroke-width="2" stroke-linecap="round"
                                          stroke-linejoin="round"/>
                                    <path d="M16.1895 11.6831V2.66882" stroke="#0B304A" stroke-width="2"
                                          stroke-linecap="round"
                                          stroke-linejoin="round"/>
                                    <path d="M19.5748 11.6831H16.1891V2.66882H19.5748C19.7642 2.66882 19.9459 2.74407 20.0799 2.87803C20.2138 3.01198 20.2891 3.19366 20.2891 3.3831V10.9688C20.2891 11.1583 20.2138 11.3399 20.0799 11.4739C19.9459 11.6079 19.7642 11.6831 19.5748 11.6831V11.6831Z"
                                          stroke="#0B304A" stroke-width="2" stroke-linecap="round"
                                          stroke-linejoin="round"/>
                                </svg>
                            </div>
                            <div class="reaction"><a
                                    href={% url 'base:discussion' pk=discussion.id %} style="text-decoration:none;color:#0B304A;">
                                <svg width="22" height="22" viewBox="0 0 22 22" fill="none"
                                     xmlns="http://www.w3.org/2000/svg">
                                    <path d="M5.99944 11.7142C6.39393 11.7142 6.71373 11.3944 6.71373 10.9999C6.71373 10.6054 6.39393 10.2856 5.99944 10.2856C5.60495 10.2856 5.28516 10.6054 5.28516 10.9999C5.28516 11.3944 5.60495 11.7142 5.99944 11.7142Z"
                                          stroke="#0B304A" stroke-width="2" stroke-linecap="round"
                                          stroke-linejoin="round"/>
                                    <path d="M10.642 11.7142C11.0365 11.7142 11.3563 11.3944 11.3563 10.9999C11.3563 10.6054 11.0365 10.2856 10.642 10.2856C10.2475 10.2856 9.92773 10.6054 9.92773 10.9999C9.92773 11.3944 10.2475 11.7142 10.642 11.7142Z"
                                          stroke="#0B304A" stroke-width="2" stroke-linecap="round"
                                          stroke-linejoin="round"/>
                                    <path d="M15.2856 11.7142C15.6801 11.7142 15.9999 11.3944 15.9999 10.9999C15.9999 10.6054 15.6801 10.2856 15.2856 10.2856C14.8911 10.2856 14.5713 10.6054 14.5713 10.9999C14.5713 11.3944 14.8911 11.7142 15.2856 11.7142Z"
                                          stroke="#0B304A" stroke-width="2" stroke-linecap="round"
                                          stroke-linejoin="round"/>
                                    <path d="M10.9996 1.71436C9.31993 1.71488 7.67186 2.17098 6.23093 3.03409C4.78999 3.8972 3.61015 5.13498 2.81706 6.61561C2.02397 8.09623 1.64734 9.76425 1.72728 11.442C1.80722 13.1198 2.34074 14.7444 3.27101 16.1429L1.71387 20.2858L6.92815 19.3429C8.18374 19.9565 9.56161 20.2787 10.9591 20.2857C12.3565 20.2926 13.7375 19.984 14.9991 19.3829C16.2607 18.7818 17.3704 17.9037 18.2454 16.814C19.1204 15.7244 19.7381 14.4513 20.0526 13.0897C20.3671 11.728 20.3702 10.313 20.0616 8.94997C19.7531 7.58697 19.1409 6.31119 18.2707 5.21774C17.4004 4.12428 16.2946 3.24134 15.0357 2.63474C13.7767 2.02814 12.3971 1.71353 10.9996 1.71436V1.71436Z"
                                          stroke="#0B304A" stroke-width="2" stroke-linecap="round"
                                          stroke-linejoin="round"/>
                                </svg>
                                <span>{{ discussion.answers_count }}</span></a>
                            </div>
                        </div>
                    </div>
                </div>
            {% endfor %}
        {% else %}
            <div class="no-results">
                <img src="{% static 'icons/no-results.svg' %}" alt="No discussions found" class="no-results-image">
                <h3>No discussions found</h3>
                <p>{% if search_query %}Your search "{{ search_query }}" didn't match any discussions{% else %}There are
                    no discussions yet{% endif %}</p>
                <a href="{% url 'base:create-discussion' %}" class="create-discussion-btn">
                    <svg width="17" height="16" viewBox="0 0 17 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <!-- Your plus icon SVG here -->
                    </svg>
                    Start a discussion
                </a>
            </div>
        {% endif %}

    </div>

    <div class="sidebar-right">
        <div class="card">
            <!-- My Activity Section -->
            <div class="activity-card">
                <h2><span class="pink">My activity</span></h2>
                <p class="active-days">{{ activity_percent }}% active days this month</p>
                <div class="calendar">
                    <div class="day">M</div>
                    <div class="day">T</div>
                    <div class="day">W</div>
                    <div class="day">T</div>
                    <div class="day">F</div>
                    <div class="day">S</div>
                    <div class="day">S</div>

                    {% for is_active in activity_days %}
                        {% if is_active %}
                            <div class="circle active"></div>
                        {% else %}
                            <div class="circle inactive"></div>
                        {% endif %}
                    {% endfor %}
                </div>
            </div>
        </div>
        <div class="popular-now">
            <h4>Popular now</h4>
            <div class="tags">
                {#                <span class="tag">#design</span>#}
                {% for tag in popular_tags %}
                    <a href="{% url 'base:tagged' tag.slug %}" class="tag">#{{ tag.name }}</a>
                    <span>#{{ tag.name }}</span>
                {% endfor %}
            </div>
        </div>
        <div class="recently-viewed">
            <h4>Recently viewed</h4>
            <div class="tags">
                {% for recent_viewed_discussion in recently_viewed_discussions %}
                    <a href="{% url 'base:discussion' pk=recent_viewed_discussion.id %}"
                       class="tag">{{ recent_viewed_discussion.title }}</a>
                {% endfor %}

                {% for recent_viewed_discussion in recently_viewed_discussions %}
                    <div class="viewed-card">
                        <p>{{ recent_viewed_discussion.content|truncatewords:20 }}</p>
                        <a href="{% url 'base:discussion' pk=recent_viewed_discussion.id %}">View more…</a>
                    </div>
                {% endfor %}

            </div>
        </div>
    </div>
</div>
<div class="pagination">
    {% if discussions.has_previous %}
        <a href="?page=1{% if active_tag %}&q=%23{{ active_tag|urlencode }}{% endif %}{% if request.GET.sort %}&sort={{ request.GET.sort }}{% endif %}{% if request.GET.time_range %}&time_range={{ request.GET.time_range }}{% endif %}{% if request.GET.tags %}&tags={{ request.GET.tags }}{% endif %}"
           class="page-nav" title="First Page">
            <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M10 12L6 8L10 4" stroke="#0B304A" stroke-width="2" stroke-linecap="round"
                      stroke-linejoin="round"/>
                <path d="M6 12L2 8L6 4" stroke="#0B304A" stroke-width="2" stroke-linecap="round"
                      stroke-linejoin="round"/>
            </svg>
        </a>
        <a href="?page=


                {{ discussions.previous_page_number }}{% if active_tag %}&q=%23{{ active_tag|urlencode }}{% endif %}{% if request.GET.sort %}&sort={{ request.GET.sort }}{% endif %}{% if request.GET.time_range %}&time_range={{ request.GET.time_range }}{% endif %}{% if request.GET.tags %}&tags={{ request.GET.tags }}{% endif %}"
           class="page-nav" title="Previous Page">
            <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M10 12L6 8L10 4" stroke="#0B304A" stroke-width="2" stroke-linecap="round"
                      stroke-linejoin="round"/>
            </svg>
        </a>
    {% endif %}

    {% for num in discussions.paginator.page_range %}
        {% if discussions.number == num %}
            <a href="?page=

                    {{ num }}{% if active_tag %}&q=%23{{ active_tag|urlencode }}{% endif %}{% if request.GET.sort %}&sort={{ request.GET.sort }}{% endif %}{% if request.GET.time_range %}&time_range={{ request.GET.time_range }}{% endif %}{% if request.GET.tags %}&tags={{ request.GET.tags }}{% endif %}"
               class="active">{{ num }}</a>
        {% elif num > discussions.number|add:'-3' and num < discussions.number|add:'3' %}
            <a href="?page=

                    {{ num }}{% if active_tag %}&q=%23{{ active_tag|urlencode }}{% endif %}{% if request.GET.sort %}&sort={{ request.GET.sort }}{% endif %}{% if request.GET.time_range %}&time_range={{ request.GET.time_range }}{% endif %}{% if request.GET.tags %}&tags={{ request.GET.tags }}{% endif %}">{{ num }}</a>
        {% endif %}
    {% endfor %}

    {% if discussions.has_next %}
        <a href="?page=

                {{ discussions.next_page_number }}{% if active_tag %}&q=%23{{ active_tag|urlencode }}{% endif %}{% if request.GET.sort %}&sort={{ request.GET.sort }}{% endif %}{% if request.GET.time_range %}&time_range={{ request.GET.time_range }}{% endif %}{% if request.GET.tags %}&tags={{ request.GET.tags }}{% endif %}"
           class="page-nav" title="Next Page">
            <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M6 4L10 8L6 12" stroke="#0B304A" stroke-width="2" stroke-linecap="round"
                      stroke-linejoin="round"/>
            </svg>
        </a>
        <a href="?page=

                {{ discussions.paginator.num_pages }}{% if active_tag %}&q=%23{{ active_tag|urlencode }}{% endif %}{% if request.GET.sort %}&sort={{ request.GET.sort }}{% endif %}{% if request.GET.time_range %}&time_range={{ request.GET.time_range }}{% endif %}{% if request.GET.tags %}&tags={{ request.GET.tags }}{% endif %}"
           class="page-nav" title="Last Page">
            <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M6 4L10 8L6 12" stroke="#0B304A" stroke-width="2" stroke-linecap="round"
                      stroke-linejoin="round"/>
                <path d="M2 4L6 8L2 12" stroke="#0B304A" stroke-width="2" stroke-linecap="round"
                      stroke-linejoin="round"/>
            </svg>
        </a>
    {% endif %}
</div>
<script>
    function openModal(src) {
        const modal = document.getElementById('modal');
        const modalImg = document.getElementById('/library/post.png');
        modal.style.display = 'flex';
        modalImg.src = src;
    }

    function closeModal() {
        document.getElementById('modal').style.display = 'none';
    }

    function toggleDropdown() {
        document.getElementById("libraryDropdown").classList.toggle("show");
    }

    window.onclick = function (event) {
        if (!event.target.matches('.dropbtn')) {
            const dropdowns = document.getElementsByClassName("dropdown-content");
            for (let i = 0; i < dropdowns.length; i++) {
                dropdowns[i].classList.remove('show');
            }
        }
    }

    document.getElementById('searchInput').addEventListener('keyup', function (e) {
        if (e.key === 'Enter') {
            this.form.submit();
        }
    });

    function debounce(func, wait) {
        let timeout;
        return function () {
            const context = this, args = arguments;
            clearTimeout(timeout);
            timeout = setTimeout(function () {
                func.apply(context, args);
            }, wait);
        };
    }

    const debouncedSearch = debounce(function () {
        this.form.submit();
    }, 500);

    document.getElementById('searchInput').addEventListener('input', debouncedSearch);


    function toggleMenu() {
        document.getElementById("profileMenu").classList.toggle("show");
    }

    window.onclick = function (event) {
        if (!event.target.closest('.avatar-dropdown')) {
            document.getElementById("profileMenu").classList.remove("show");
        }
    }

    function togglePostMenu(element) {
        // Close all other open menus first
        document.querySelectorAll('.post-dropdown-menu').forEach(menu => {
            if (menu !== element.nextElementSibling) {
                menu.classList.remove('show');
            }
        });

        // Toggle the clicked menu
        const menu = element.nextElementSibling;
        menu.classList.toggle('show');

        // Close when clicking outside
        const clickHandler = function (e) {
            if (!menu.contains(e.target) && e.target !== element) {
                menu.classList.remove('show');
                document.removeEventListener('click', clickHandler);
            }
        };

        document.addEventListener('click', clickHandler);
    }


    // Save discussion functionality
    document.querySelectorAll('.save-btn').forEach(btn => {
        btn.addEventListener('click', async function (e) {
            e.preventDefault();
            const discussionId = this.getAttribute('data-discussion-id');

            try {
                const response = await fetch(`/save-discussion/${discussionId}/`, {
                    method: 'POST',
                    headers: {
                        'X-CSRFToken': '{{ csrf_token }}',
                        'Content-Type': 'application/json'
                    },
                    credentials: 'same-origin'
                });

                const data = await response.json();

                if (data.status === 'saved') {
                    this.querySelector('.save-text').textContent = 'Unsave';
                    this.querySelector('i').classList.replace('fa-regular', 'fa-solid');
                } else if (data.status === 'unsaved') {
                    this.querySelector('.save-text').textContent = 'Save';
                    this.querySelector('i').classList.replace('fa-solid', 'fa-regular');
                }

            } catch (error) {
                console.error('Error:', error);
            }
        });
    });

    document.querySelectorAll('.tag-container a.tag').forEach(tag => {
        tag.addEventListener('click', function (e) {
            e.preventDefault();
            const url = this.getAttribute('href');
            window.history.pushState({}, '', url);
            window.location.href = url;
        });
    });

    // Report discussion functionality
    const reportModal = document.getElementById('reportModal');
    const reportBtns = document.querySelectorAll('.report-btn');
    const closeBtn = document.querySelector('.close');
    const reportForm = document.getElementById('reportForm');

    reportBtns.forEach(btn => {
        btn.addEventListener('click', function (e) {
            e.preventDefault();
            const discussionId = this.getAttribute('data-discussion-id');
            document.getElementById('reportDiscussionId').value = discussionId;
            reportModal.style.display = 'block';
        });
    });

    closeBtn.onclick = function () {
        reportModal.style.display = 'none';
    }

    window.onclick = function (event) {
        if (event.target == reportModal) {
            reportModal.style.display = 'none';
        }
    }

    reportForm.addEventListener('submit', async function (e) {
        e.preventDefault();
        const discussionId = document.getElementById('reportDiscussionId').value;
        const reason = document.getElementById('reportReason').value;

        try {
            const response = await fetch(`/report-discussion/${discussionId}/`, {
                method: 'POST',
                headers: {
                    'X-CSRFToken': '{{ csrf_token }}',
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({reason: reason}),
                credentials: 'same-origin'
            });

            const data = await response.json();

            if (data.status === 'reported') {
                alert('Discussion reported successfully. Thank you!');
                reportModal.style.display = 'none';
                reportForm.reset();
            } else if (data.status === 'already_reported') {
                alert('You have already reported this discussion.');
                reportModal.style.display = 'none';
            } else {
                alert('Error: ' + (data.message || 'Something went wrong'));
            }

        } catch (error) {
            console.error('Error:', error);
            alert('An error occurred while reporting the discussion.');
        }
    });

    function openFilterModal() {
        document.getElementById('filterModal').style.display = 'flex';
    }

    function closeFilterModal() {
        document.getElementById('filterModal').style.display = 'none';
    }

    function resetFilters() {
        // Reset form inputs
        const form = document.getElementById('filterForm');
        form.reset();

        // Clear Select2 if used
        if (typeof $ !== 'undefined' && $('#tagFilter').data('select2')) {
            $('#tagFilter').val(null).trigger('change');
        }

        // Get clean URL without query parameters
        const cleanUrl = window.location.pathname;

        // Redirect to clean URL
        window.location.href = cleanUrl;
    }

    // Close modal when clicking outside
    window.onclick = function (event) {
        const modal = document.getElementById('filterModal');
        if (event.target == modal) {
            closeFilterModal();
        }
    }

    // Initialize tag selector with Select2 (if you want enhanced multi-select)
    // You'll need to include Select2 CSS and JS in your head
    $(document).ready(function () {
        $('#tagFilter').select2({
            placeholder: "Select tags...",
            allowClear: true,
            width: '100%'
        });
    });

    // Update the filter button click handler
    document.querySelector('.filter-btn').addEventListener('click', openFilterModal);
</script>

<!-- Filter Modal -->
<div id="filterModal" class="modal">
    <div class="modal-content" style="width: 400px;">
        <span class="close" onclick="closeFilterModal()">&times;</span>
        <h3>Filter Discussions</h3>

        <form id="filterForm" method="GET" action="{% url 'base:home' %}">
            <!-- Sort By -->
            <div class="filter-section">
                <h4>Sort By</h4>
                <div class="filter-options">
                    <label class="filter-option">
                        <input type="radio" name="sort" value="newest"
                               {% if not request.GET.sort or request.GET.sort == 'newest' %}checked{% endif %}>
                        <span>Newest First</span>
                    </label>
                    <label class="filter-option">
                        <input type="radio" name="sort" value="oldest"
                               {% if request.GET.sort == 'oldest' %}checked{% endif %}>
                        <span>Oldest First</span>
                    </label>
                    <label class="filter-option">
                        <input type="radio" name="sort" value="most_answers"
                               {% if request.GET.sort == 'most_answers' %}checked{% endif %}>
                        <span>Most Answers</span>
                    </label>
                    <label class="filter-option">
                        <input type="radio" name="sort" value="least_answers"
                               {% if request.GET.sort == 'least_answers' %}checked{% endif %}>
                        <span>Least Answers</span>
                    </label>
                </div>
            </div>

            <!-- Time Range -->
            <div class="filter-section">
                <h4>Time Range</h4>
                <div class="filter-options">
                    <label class="filter-option">
                        <input type="radio" name="time_range" value="all_time"
                               {% if not request.GET.time_range or request.GET.time_range == 'all_time' %}checked{% endif %}>
                        <span>All Time</span>
                    </label>
                    <label class="filter-option">
                        <input type="radio" name="time_range" value="last_week"
                               {% if request.GET.time_range == 'last_week' %}checked{% endif %}>
                        <span>Last Week</span>
                    </label>
                    <label class="filter-option">
                        <input type="radio" name="time_range" value="last_month"
                               {% if request.GET.time_range == 'last_month' %}checked{% endif %}>
                        <span>Last Month</span>
                    </label>
                </div>
            </div>

            <!-- Tags -->
            <div class="filter-section">
                <h4>Filter by Tags</h4>
                <div class="tag-selector">
                    <select name="tags" multiple class="tag-select" id="tagFilter">
                        {% for tag in all_tags %}
                            <option value="{{ tag.name }}" {% if tag.name in selected_tags %}selected{% endif %}>
                                #{{ tag.name }}
                            </option>
                        {% endfor %}
                    </select>
                </div>
            </div>

            <div class="filter-actions">
                <button type="button" class="filter-reset" onclick="resetFilters()">Reset</button>
                <button type="submit" class="filter-apply">Apply Filters</button>
            </div>
        </form>
    </div>
</div>

</body>
<footer class="footer">
    <div class="footer-inner">
        <h2 class="footer-logo">MindBridge</h2>
        <div class="footer-grid">
            <div class="footer-column">
                <a href="{% url 'base:home' %}">Home</a>
                <a href="{% url 'careers:vacancy_list' %}">Career</a>
                <a href="{% url 'base:home' %}">Discussions</a>
            </div>
            <div class="footer-column">
                <a href="{% url 'library' %}">Articles</a>
                <a href="{% url 'library' %}">Videos</a>
                <a href="{% url 'library' %}">Books</a>
            </div>
            <div class="footer-column">
                {#                <a href="{% url 'about' %}">About</a>#}
            </div>
        </div>
        <p class="footer-copy">{% now "Y" %} MindBridge</p>
    </div>
</footer>
</html>
