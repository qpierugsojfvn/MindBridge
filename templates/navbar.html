{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="static/base/home.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">
    <title>Home MindBridge</title>
</head>
<body>
    <header>
        <nav class="navbar">
            <div class="logo">
                <a href="{% url 'home' %}">
{#                    <img alt="logo" src={% static 'img/logo letter word blue pink.png' %}>#}
<?xml version="1.0" encoding="UTF-8"?>
<svg id="Layer_2" data-name="Layer 2" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 158.53 32">
  <defs>
    <style>
      .cls-1 {
        fill: #fff;
      }
    </style>
  </defs>
  <g id="Layer_4" data-name="Layer 4">
    <g>
      <polygon class="cls-1" points="34.07 0 16.63 22.98 6.86 10.09 6.86 32 0 32 0 0 6.86 0 16.63 12.83 26.41 0 34.07 0"/>
      <path class="cls-1" d="M33.72,32H15.3l4.61-6.32h12.39c2.08,0,3.76-1.69,3.76-3.76,0-1.04-.42-1.98-1.1-2.66-.68-.68-1.62-1.1-2.66-1.1h-6.89l4.17-5.71h2.35c1.82,0,3.3-1.48,3.3-3.3,0-.91-.37-1.74-.97-2.33-.11-.11-.23-.21-.35-.3l3.73-5.11c4.7,1.2,4.93,12.19,0,13.65,8.44,1.96,5.33,16.95-3.94,16.95Z"/>
      <g>
        <path class="cls-1" d="M66.8,21.88h-3.21l-.9-7.82-2.99,6.24h-2.39l-2.99-6.22-.92,7.8h-3.21l1.69-13.74h2.61l4.01,8.59,3.95-8.59h2.67l1.67,13.74Z"/>
        <path class="cls-1" d="M68.39,9.45c0-.98.84-1.71,1.83-1.71s1.79.74,1.79,1.71-.8,1.71-1.79,1.71-1.83-.78-1.83-1.71ZM68.75,21.88v-9.31h2.95v9.31h-2.95Z"/>
        <path class="cls-1" d="M83.49,16.87v5h-2.95v-4.83c0-1.44-.88-1.99-1.62-1.99-.8,0-1.79.42-1.79,1.97v4.85h-2.95v-9.31h2.95v1.62c.36-1.28,1.81-1.85,2.67-1.85,2.47,0,3.69,1.69,3.69,4.55Z"/>
        <path class="cls-1" d="M92.72,7.5h2.93v14.38h-2.93v-1.04c-.68.9-1.93,1.28-2.89,1.28-2.31,0-4.51-1.89-4.51-4.91s2.19-4.88,4.51-4.88c.96,0,2.21.38,2.89,1.26v-6.08ZM92.6,17.21c0-1.2-1.02-2.15-2.13-2.15s-2.15.98-2.15,2.15,1,2.17,2.15,2.17,2.13-.98,2.13-2.17Z"/>
        <path class="cls-1" d="M108.87,17.93c0,1.87-1.22,3.95-4.45,3.95h-5.96v-13.74h5.56c2.51,0,4.13,1.52,4.13,3.55,0,.96-.36,2.39-1.93,2.85,1.81.26,2.65,1.81,2.65,3.39ZM103.8,10.87h-2.21v2.63h2.19c.74,0,1.24-.48,1.24-1.32,0-.7-.36-1.32-1.22-1.32ZM104.04,19.14c1.12,0,1.67-.76,1.67-1.54,0-.72-.5-1.54-1.67-1.54h-2.45v3.07h2.45Z"/>
        <path class="cls-1" d="M117.86,12.6l-.7,2.81c-.58-.34-1.04-.36-1.34-.36-1.16,0-2.11.98-2.11,3.73v3.09h-2.95v-9.31h2.91v1.97c.54-1.54,1.65-2.21,2.79-2.21.44,0,.92.04,1.4.28Z"/>
        <path class="cls-1" d="M118.79,9.45c0-.98.84-1.71,1.83-1.71s1.79.74,1.79,1.71-.8,1.71-1.79,1.71-1.83-.78-1.83-1.71ZM119.15,21.88v-9.31h2.95v9.31h-2.95Z"/>
        <path class="cls-1" d="M131.45,7.5h2.93v14.38h-2.93v-1.04c-.68.9-1.93,1.28-2.89,1.28-2.31,0-4.51-1.89-4.51-4.91s2.19-4.88,4.51-4.88c.96,0,2.21.38,2.89,1.26v-6.08ZM131.33,17.21c0-1.2-1.02-2.15-2.13-2.15s-2.15.98-2.15,2.15,1,2.17,2.15,2.17,2.13-.98,2.13-2.17Z"/>
        <path class="cls-1" d="M143.74,12.56h2.93v8.19c0,3.95-2.07,5.94-5.44,5.94-2.11,0-3.91-1.24-4.65-2.99l2.43-.98c.34.76,1.24,1.38,2.21,1.38,1.54,0,2.51-.86,2.51-2.99v-.28c-.7.88-1.93,1.28-2.89,1.28-2.31,0-4.51-1.89-4.51-4.91s2.19-4.88,4.51-4.88c.96,0,2.19.38,2.89,1.26v-1.02ZM143.62,17.21c0-1.2-1.02-2.15-2.13-2.15s-2.15.98-2.15,2.15,1,2.17,2.15,2.17,2.13-.98,2.13-2.17Z"/>
        <path class="cls-1" d="M158.49,18.09h-6.82c.28.9,1.06,1.46,2.17,1.46.88,0,1.77-.4,2.35-.96l1.52,1.91c-.92,1-2.51,1.62-4.07,1.62-2.95,0-5.02-2.03-5.02-4.86,0-3.03,2.33-4.92,5-4.92s4.9,1.87,4.9,4.71c0,.26-.02.6-.04,1.06ZM155.6,16.35c-.04-.92-.86-1.54-1.91-1.54-.88,0-1.73.42-2.03,1.54h3.95Z"/>
      </g>
    </g>
  </g>
</svg>
                </a>
            </div>
            <ul class="nav-links">
                <li><a href="/">Home</a></li>
                <li><a href="/">Discussions</a></li>
                <li><a href="#">Library</a></li>
                <li><a href="#">Career</a></li>
            </ul>
{#            <input type="text" class="search-bar" placeholder="Search for...">#}
            <form method="GET" action="{% url 'home' %}">
                <input type="text" name="q" class="search-bar" placeholder="Search discussions...">
            </form>
            <div class="icons">
                <i class="bi bi-bell"></i>
                <i class="bi bi-chat"></i>
                {% if request.user.is_authenticated %}
                    {# profile photo #}
{#                    <i class="bi bi-person"><a  href={% url 'user-profile' pk=user.id %}></a></i>#}
                    <a  href={% url 'user-profile' pk=user.id %}><i class="bi bi-person"></i></a>
                    Hello, {{ request.user.username }}!
                    <a href={% url 'logout' %}><i class="bi bi-door-open"></i></a>

                {% else %}
                    <a href={% url 'login' %}><i class="bi bi-person"></i></a>
                {% endif %}
            </div>
        </nav>
    </header>

    <script>
        let posts = [
            {
                id: 1,
                user: "Lianna Limm",
                avatar: "/library/ava.png",
                image: [""],
                text: "Title PWA application",
                hashtags: ["design", "ais","ais_krasivaya"],
                likes: 0,
                dislikes: 0,
                comments: ["Wow, amazing!", "–ê–π—Å —Ç—ã –º–æ–ª–æ–¥–µ—Ü—Ü"]
            },
        ];
    //–ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–æ—Å—Ç
        function renderPosts(filterTag = null) {
            $("#posts-container").empty();
            posts.forEach(post => {
                if (filterTag && !post.hashtags.includes(filterTag)) return;

                let hashtagsHtml = post.hashtags.map(tag => `<span class="tags" data-tag="${tag}">#${tag}</span>`).join(" ");
                let commentsHtml = post.comments.map(comment => `<p class="small">${comment}</p>`).join("");

                let postHtml = `
                    <div class="card">
                        <div class="card-header d-flex align-items-center">
                            <img src="${post.avatar}" class="rounded-circle me-2" width="40">
                            <strong>${post.user}</strong>
                        </div>
                        <img src="${post.image}" class="card-img-top">
                        <div class="card-body">
                            <p>${post.text}</p>
                            <div>${hashtagsHtml}</div>
                            <div class="post-actions mt-2">
                                <span class="like-btn" data-id="${post.id}">‚ù§Ô∏è ${post.likes}</span>
                                <span class="dislike-btn" data-id="${post.id}">üëé ${post.dislikes}</span>
                                <span class="comment-toggle" data-id="${post.id}">üí¨ Comments</span>
                            </div>
                            <div class="comments mt-2" id="comments-${post.id}">
                                ${commentsHtml}
                                <input type="text" class="form-control comment-input" data-id="${post.id}" placeholder="Add a comment...">
                            </div>
                        </div>
                    </div>
                `;
                $("#posts-container").append(postHtml);
            });
        }

        $(document).ready(function() {
            renderPosts();

      //–ª–∞–π–∫ –¥–∏–∑–ª–∞–π–∫ –∞–Ω–∞—É –º—ã–Ω–∞—É
            $(document).on("click", ".like-btn", function() {
                let postId = $(this).data("id");
                posts = posts.map(post => post.id === postId ? { ...post, likes: post.likes + 1 } : post);
                renderPosts();
            });

            $(document).on("click", ".dislike-btn", function() {
                let postId = $(this).data("id");
                posts = posts.map(post => post.id === postId ? { ...post, dislikes: post.dislikes + 1 } : post);
                renderPosts();
            });


            $(document).on("click", ".comment-toggle", function() {
            let postId = $(this).data("id");
            $(`#comments-${postId}`).toggle();
        });
//–∫–æ–º–º–µ–Ω—Ç—ã
        $(document).on("keypress", ".comment-input", function(event) {
            if (event.which === 13) {
                let postId = $(this).data("id");
                let commentText = $(this).val().trim();
                if (commentText) {
                    posts = posts.map(post => post.id === postId ? { ...post, comments: [...post.comments, commentText] } : post);
                    renderPosts();
                }
            }
        });


 //—Ñ–∏–ª—å—Ç—Ä —Ö—ç—à—Ç–µ–≥–ø–µ–Ω
            $(document).on("click", ".tags", function() {
                let tag = $(this).data("tag");
                $("#filter-tag").text(`#${tag}`);
                $("#clear-filter").removeClass("d-none");
                renderPosts(tag);
            });

            $("#clear-filter").click(function() {
                $("#filter-tag").text("");
                $(this).addClass("d-none");
                renderPosts();
            });

        });
    </script>
</body>
</html>



{#{% load static %}#}
{#<a href="/">#}
{#    <h1>LOGO</h1>#}
{#</a>#}
{##}
{##}
{##}
{#<form method="GET" action="{% url 'home' %}">#}
{#    <input type="text" name="q" placeholder="Search discussions...">#}
{#</form>#}
{##}
{#{% if request.user.is_authenticated %}#}
{#    <p>Hello, {{ request.user }}</p>#}
{#<a href="{% url 'logout' %}">Logout</a>#}
{#{% else %}#}
{#<a href="{% url 'login' %}">Login</a>#}
{#{% endif %}#}
{##}
{#<hr>#}